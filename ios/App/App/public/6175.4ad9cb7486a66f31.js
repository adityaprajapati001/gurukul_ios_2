"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6175],{6175:(N,h,r)=>{r.r(h),r.d(h,{IndexQuizPageModule:()=>C});var p=r(6814),_=r(95),s=r(3134),d=r(4875),f=r(5861),t=r(9212),x=r(653),z=r(5175),A=r(2359);const Z=["popover"];function b(i,l){1&i&&(t.TgZ(0,"ion-content")(1,"ion-list",23)(2,"ion-item",24)(3,"div")(4,"h1",25),t._uU(5,"You Must"),t.qZA(),t.TgZ(6,"p",26),t._uU(7,"Received a Grade"),t.qZA()()()()())}function q(i,l){if(1&i&&(t.TgZ(0,"ion-badge",38),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(),t.Oqu(e.gradesOfAttempt)}}function T(i,l){if(1&i&&(t.TgZ(0,"ion-badge",38),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(),t.Oqu(t.lcZ(2,1,e.state))}}function v(i,l){if(1&i&&(t.TgZ(0,"ion-list")(1,"ion-card",28)(2,"ion-item")(3,"ion-label",29),t._uU(4,"Attempts: "),t.TgZ(5,"span"),t._uU(6),t.qZA()()(),t.TgZ(7,"ion-item")(8,"ion-label",29),t._uU(9,"Sum Grades: "),t.TgZ(10,"span"),t._uU(11),t.qZA()()(),t.TgZ(12,"ion-item")(13,"ion-label",29),t._uU(14,"Time Limit : "),t.TgZ(15,"span"),t._uU(16),t.qZA()()(),t.TgZ(17,"ion-item")(18,"ion-label",29),t._uU(19,"Grading Method : Highest Grade "),t.qZA()(),t.TgZ(20,"ion-item")(21,"ion-label",29),t._uU(22,"Grade to Pass : "),t.TgZ(23,"span"),t._uU(24),t.qZA()()(),t.TgZ(25,"ion-card",30)(26,"ion-card-header",31),t._uU(27,"Summary of Previous Attempts"),t.qZA(),t.TgZ(28,"ion-card-content",32)(29,"ion-list",24)(30,"ion-row")(31,"ion-col",33)(32,"ion-item")(33,"ion-label"),t._uU(34,"Grade : "),t.qZA()()(),t.TgZ(35,"ion-col",34)(36,"ion-item"),t.YNc(37,q,2,1,"ion-badge",35),t.qZA()(),t.TgZ(38,"ion-col",33)(39,"ion-item")(40,"ion-label"),t._uU(41,"State : "),t.qZA()()(),t.TgZ(42,"ion-col",34)(43,"ion-item"),t.YNc(44,T,3,3,"ion-badge",35),t.qZA()(),t.TgZ(45,"ion-col",33)(46,"ion-item")(47,"ion-label"),t._uU(48,"Review : "),t.qZA()()(),t.TgZ(49,"ion-col",34)(50,"ion-item")(51,"ion-badge",36),t._uU(52,"Not Permitteed"),t.qZA()()(),t.TgZ(53,"ion-col",33)(54,"ion-item")(55,"ion-label"),t._uU(56,"Submitted On : "),t.qZA()()(),t.TgZ(57,"ion-col",34)(58,"ion-item")(59,"ion-label",37),t._uU(60),t.qZA()()()()()()()()()),2&i){const e=l.$implicit,n=t.oxw(2);t.xp6(6),t.Oqu(e.attempt),t.xp6(5),t.Oqu(e.gradesOfAttempt),t.xp6(5),t.hij("",null==n.quizAttamptData||null==n.quizAttamptData.timelimit?null:n.quizAttamptData.timelimit.split(".")[0]," Minutes"),t.xp6(8),t.AsE("",null==n.quizAttamptData?null:n.quizAttamptData.gradepass," out of ",null==n.quizAttamptData?null:n.quizAttamptData.grademax,""),t.xp6(13),t.Q6J("ngIf",n.data),t.xp6(7),t.Q6J("ngIf",n.data),t.xp6(16),t.Oqu(n.convertTimestamp(n.timefinish))}}function I(i,l){if(1&i&&(t.ynx(0),t.YNc(1,v,61,8,"ion-list",27),t.BQk()),2&i){const e=t.oxw();t.xp6(),t.Q6J("ngForOf",e.maxQuizAttamptData)}}function w(i,l){if(1&i&&(t.TgZ(0,"ion-item")(1,"ion-label",29),t._uU(2,"Grade to Pass : "),t.TgZ(3,"span"),t._uU(4),t.qZA()()()),2&i){const e=t.oxw(2);t.xp6(4),t.AsE("",null==e.quizAttamptData?null:e.quizAttamptData.gradepass," out of ",null==e.quizAttamptData?null:e.quizAttamptData.grademax,"")}}function y(i,l){1&i&&(t.TgZ(0,"ion-badge",38),t._uU(1,"--"),t.qZA())}function P(i,l){if(1&i&&(t.ynx(0),t.TgZ(1,"ion-list")(2,"ion-card",28)(3,"ion-item")(4,"ion-label",29),t._uU(5,"Attempts: "),t.TgZ(6,"span"),t._uU(7,"--"),t.qZA()()(),t.TgZ(8,"ion-item")(9,"ion-label",29),t._uU(10,"Sum Grades: "),t.TgZ(11,"span"),t._uU(12,"--"),t.qZA()()(),t.TgZ(13,"ion-item")(14,"ion-label",29),t._uU(15,"Time Limit : "),t.TgZ(16,"span"),t._uU(17),t.qZA()()(),t.TgZ(18,"ion-item")(19,"ion-label",29),t._uU(20,"Grading Method : Highest Grade "),t.qZA()(),t.YNc(21,w,5,2,"ion-item",19),t.TgZ(22,"ion-card",30)(23,"ion-card-header",31),t._uU(24,"Summary of Previous Attempts"),t.qZA(),t.TgZ(25,"ion-card-content",32)(26,"ion-list",24)(27,"ion-row")(28,"ion-col",33)(29,"ion-item")(30,"ion-label"),t._uU(31,"State : "),t.qZA()()(),t.TgZ(32,"ion-col",34)(33,"ion-item"),t.YNc(34,y,2,0,"ion-badge",35),t.qZA()(),t.TgZ(35,"ion-col",33)(36,"ion-item")(37,"ion-label"),t._uU(38,"Review : "),t.qZA()()(),t.TgZ(39,"ion-col",34)(40,"ion-item")(41,"ion-badge",36),t._uU(42,"--"),t.qZA()()(),t.TgZ(43,"ion-col",33)(44,"ion-item")(45,"ion-label"),t._uU(46,"Submitted On : "),t.qZA()()(),t.TgZ(47,"ion-col",34)(48,"ion-item"),t._UZ(49,"ion-label",37),t.qZA()()()()()()()(),t.BQk()),2&i){const e=t.oxw();t.xp6(17),t.hij("",null==e.quizAttamptData||null==e.quizAttamptData.timelimit?null:e.quizAttamptData.timelimit.split(".")[0]," Minutes"),t.xp6(4),t.Q6J("ngIf",e.quizAttamptData),t.xp6(13),t.Q6J("ngIf",e.data)}}function Q(i,l){1&i&&(t.TgZ(0,"div",39)(1,"ion-card",40)(2,"ion-card-content",32)(3,"ion-list",24)(4,"ion-item")(5,"ion-label"),t._uU(6,"Highest Grade "),t.TgZ(7,"strong"),t._uU(8,"1/10"),t.qZA()()()()()(),t._UZ(9,"div"),t.qZA())}function M(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",39)(1,"ion-button",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onStart())}),t.TgZ(2,"span",42),t._uU(3,"Re-attempt Quiz"),t.qZA()()()}}function U(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",43)(1,"ion-button",41),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.onStart())}),t.TgZ(2,"span",42),t._uU(3,"Attempt Quiz Now"),t.qZA()()()}}const D=[{path:"",component:(()=>{class i{constructor(e,n,o,u,m,S){this.router=e,this.route=n,this.dataService=o,this.authService=u,this.toastCtrl=m,this.tokenService=S,this.isOpen=!1,this.showGrade=!1,this.showButton=!0,this.quizName=localStorage.getItem("quizName"),this.route.queryParams.subscribe(c=>{c&&c.data&&(console.log("beforee submit :",c),this.attemptId="",this.data=JSON.parse(c.data),this.courseId=c.courseId,this.quizId=parseInt(c.data),console.log("beforee submit 1:",this.tokenService.getUser()[0].id,this.data,this.courseId),this.authService.isAttemptFinish(this.tokenService.getUser()[0].id,this.data).subscribe({next:g=>{console.log(g),""===g[0].state?(console.log("empty"),this.authService.startQuizById(this.data).subscribe({next:a=>{console.log(a),this.data=a,a.attempt?(this.attemptId=a.attempt.id,this.linkUserAttempt(),a.warnings.length>0&&a.warnings[0].message&&(this.warningMsg=this.data.warnings[0].message,this.showButton=!1,console.log(this.data.warnings[0].message),this.presentToast(this.warningMsg,"danger")),console.log(this.attemptId)):this.errorMsg=this.data.message},error:a=>{console.error("Login failed:",a)}})):"finished"===g[0].state?(console.log("finished"),this.authService.startQuizById(this.data).subscribe({next:a=>{console.log(a),this.data=a,a.attempt?(this.attemptId=a.attempt.id,this.linkUserAttempt(),a.warnings.length>0&&a.warnings[0].message&&(this.warningMsg=this.data.warnings[0].message,this.showButton=!1,console.log(this.data.warnings[0].message),this.presentToast(this.warningMsg,"danger")),console.log(this.attemptId)):(this.errorMsg=this.data.message,console.log(this.errorMsg))},error:a=>{console.error("Login failed:",a)}})):"inprogress"===g[0].state&&(console.log("inprogress"),this.attemptId=g[0].id,this.linkUserAttempt())},error:g=>{console.error(g)}})),c.quizResult&&(this.subscription=this.dataService.indexQuizContent.subscribe(g=>{this.quizResult=g,this.showGrade=!0,this.quizGrade=g.grade,this.quizFinishTime=g.attempt.timefinish,this.authService.startQuizById(this.quizResult.attempt.quiz).subscribe({next:a=>{this.data=a,console.log("data",a),a?.attempt?(this.attemptId=a.attempt.id,a.warnings.length>0&&a.warnings[0].message&&(this.warningMsg=this.data.warnings[0].message,this.showButton=!1,this.presentToast(this.warningMsg,"danger")),this.linkUserAttempt(),console.log(this.attemptId)):(this.errorMsg=this.data.message,console.log(this.errorMsg))},error:a=>{console.error("Login failed:",a)}})}))})}ngOnInit(){}ionViewWillEnter(){this.getMaxAttemptData(),this.getData()}convertTimestamp(e){return new Date(1e3*e).toLocaleString()}getData(){var e=this;return(0,f.Z)(function*(){return e.authService.getQuizData(e.data,e.courseId).then(function(){var n=(0,f.Z)(function*(o){if(e.quizAttamptData=yield o[0],console.log(e.quizAttamptData,"this.quizAttamptData"),e.quizAttamptData){const u=yield Number(e.quizAttamptData.gradepass),m=yield Number(e.quizAttamptData.grademax);e.quizAttamptData.gradepass=yield u.toFixed(2),e.quizAttamptData.grademax=yield m.toFixed(2)}console.log(e.quizAttamptData,"this.quizAttamptData")});return function(o){return n.apply(this,arguments)}}(),n=>{console.error("Login failed:",n)})})()}getMaxAttemptData(){this.authService.getMaxAttemptData(this.quizId,this.tokenService.getUser()[0].id).subscribe(e=>{console.log("res",e),this.timefinish=e.attempts[0].timefinish,console.log("timefinish",this.timefinish),this.maxQuizAttamptData=e.attempts,console.log("this.quizResult -- ",this.quizResult),console.log("this.data *--* ",this.data),0==this.maxQuizAttamptData.length&&this.data&&null!=this.quizResult&&("object"==typeof this.data?this.maxQuizAttamptData.push(this.data.attempt):this.maxQuizAttamptData=this.data.attempt),this.maxQuizAttamptData&&this.maxQuizAttamptData.forEach(n=>{n.gradesOfAttempt=Number(null==n.sumgrades?0:n.sumgrades)/(Number(this.quizAttamptData?.totalmarks?.split(".")[0])/Number(this.quizAttamptData?.grademax.split(".")[0])),Number.isNaN(n.gradesOfAttempt)&&(n.gradesOfAttempt=0)}),console.log("this.maxQuizAttamptData",this.maxQuizAttamptData)},e=>{console.error("Login failed:",e)})}linkUserAttempt(){}checkAttempt(){console.log(this.tokenService.getUser()[0].id),this.authService.isAttemptFinish(this.tokenService.getUser()[0].id,this.data).subscribe({next:e=>{console.log(e)},error:e=>{console.error("Login failed:",e)}})}getAttemptSummary(){this.authService.getAttemptSummary(this.attemptId).subscribe({next:e=>{this.quizData=e,console.log(e)},error:e=>{console.error("Login failed:",e)}})}presentPopover(e){this.popover.event=e,this.isOpen=!0}onStart(){if(this.errorMsg&&this.presentToast(this.errorMsg,"danger"),this.warningMsg&&this.presentToast(this.warningMsg,"danger"),""!==this.attemptId&&void 0!==this.attemptId){let e={queryParams:{data:JSON.stringify(this.attemptId)}};this.router.navigate(["start-quiz"],e)}}presentToast(e,n){var o=this;return(0,f.Z)(function*(){(yield o.toastCtrl.create({message:e,duration:1500,position:"top",color:n})).present()})()}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(d.F0),t.Y36(d.gz),t.Y36(x.D),t.Y36(z.e),t.Y36(s.yF),t.Y36(A.B))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-index-quiz"]],viewQuery:function(n,o){if(1&n&&t.Gf(Z,5),2&n){let u;t.iGM(u=t.CRH())&&(o.popover=u.first)}},decls:34,vars:11,consts:[[1,"ion-page"],[3,"translucent"],["color","primary","slot","start","defaultHref",""],[3,"fullscreen"],[1,"h-100","position-relative","overflow-auto"],[1,"main"],[1,"p-3","d-flex","align-items-center"],["src","assets/img/quiz.png","alt",""],[1,"content_p","ms-2",3,"innerHTML"],[1,"content_main"],[1,"col-12"],[1,"content_head","pt-0"],["color","primary",1,"col-2","card_badge"],["name","caret-down-sharp",3,"click"],[3,"isOpen","didDismiss"],["popover",""],[1,"col-12","p-3"],["lines","none",1,"list"],[1,"ryt_label","text-center"],[4,"ngIf"],["class","col-12 p-3 pt-0",4,"ngIf"],[1,"col-12","d-flex","align-items-center","justify-content-between"],["class","p-3 w-100",4,"ngIf"],[1,"p-0"],["lines","none"],[1,"pop_head","m-0","p-0"],[1,"pop_body","m-0","p-0"],[4,"ngFor","ngForOf"],[1,"card","shadow"],[1,"ryt_label"],[1,"card"],[1,"card_head","mt-0","p-2","text-center"],[1,"m-0","p-0"],["size","5"],["size","7"],["class","p-2","color","warning",4,"ngIf"],["color","danger",1,"p-2"],[1,"p-2"],["color","warning",1,"p-2"],[1,"col-12","p-3","pt-0"],[1,"card","mb-3"],["expand","block","color","success",1,"start_btn",3,"click"],[1,"start_span"],[1,"p-3","w-100"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"ion-header",1)(2,"ion-toolbar"),t._UZ(3,"ion-back-button",2),t.qZA()(),t.TgZ(4,"ion-content",3)(5,"div",4)(6,"div",5)(7,"div",6),t._UZ(8,"ion-img",7)(9,"p",8),t.qZA(),t.TgZ(10,"div",9)(11,"div",10)(12,"div",11)(13,"ion-badge",12),t._uU(14,"To Do\xa0"),t.TgZ(15,"ion-icon",13),t.NdJ("click",function(m){return o.presentPopover(m)}),t.qZA()(),t.TgZ(16,"ion-popover",14,15),t.NdJ("didDismiss",function(){return o.isOpen=!1}),t.YNc(18,b,8,0,"ng-template"),t.qZA()()(),t.TgZ(19,"div",16)(20,"ion-list",17)(21,"ion-item")(22,"ion-label",18),t._uU(23,"Attempts Allowed: "),t.TgZ(24,"span"),t._uU(25),t.qZA()()(),t.YNc(26,I,2,1,"ng-container",19)(27,P,50,3,"ng-container",19),t.qZA()()(),t.YNc(28,Q,10,0,"div",20),t.qZA()()(),t.TgZ(29,"ion-footer",1)(30,"ion-toolbar")(31,"div",21),t.YNc(32,M,4,0,"div",20)(33,U,4,0,"div",22),t.qZA()()()()),2&n&&(t.xp6(),t.Q6J("translucent",!0),t.xp6(3),t.Q6J("fullscreen",!0),t.xp6(5),t.Q6J("innerHTML",o.quizName,t.oJD),t.xp6(7),t.Q6J("isOpen",o.isOpen),t.xp6(9),t.Oqu(null==o.quizAttamptData?null:o.quizAttamptData.attempts),t.xp6(),t.Q6J("ngIf",(null==o.maxQuizAttamptData?null:o.maxQuizAttamptData.length)>0),t.xp6(),t.Q6J("ngIf",0==(null==o.maxQuizAttamptData?null:o.maxQuizAttamptData.length)),t.xp6(),t.Q6J("ngIf",o.showGrade),t.xp6(),t.Q6J("translucent",!0),t.xp6(3),t.Q6J("ngIf",o.showGrade&&o.showButton),t.xp6(),t.Q6J("ngIf",!o.showGrade&&o.showButton))},dependencies:[p.sg,p.O5,s.yp,s.YG,s.PM,s.FN,s.Zi,s.wI,s.W2,s.fr,s.Gu,s.gu,s.Xz,s.Ie,s.Q$,s.q_,s.Nd,s.sr,s.d8,s.oU,p.rS],styles:['.content_p[_ngcontent-%COMP%]{margin:0;font-family:Inter,sans-serif;font-size:25px;font-weight:500}.content_head[_ngcontent-%COMP%]{padding:15px}.card_badge[_ngcontent-%COMP%]{border-radius:20px;color:#fff;font-family:Inter,sans-serif;font-size:10px;font-weight:500;padding:5px;display:flex;align-items:center;justify-content:center}.box[_ngcontent-%COMP%]{border:1px solid #000}.body[_ngcontent-%COMP%]{text-align:center;font-family:Inter,sans-serif;font-size:29px;font-style:normal;font-weight:500}.act_btn[_ngcontent-%COMP%]{--border: none;--border-radius: none;--background: none;--box-shadow: none;--font-family: "Inter", sans-serif;--font-size: 15px;--font-style: normal;--font-weight: 500}.box_next[_ngcontent-%COMP%]{border-radius:9px;border:.3px solid #dadada;background:#f8f8f8}.body_next[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-size:18px;font-weight:500}.attempt[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-size:15px;font-weight:300}.pop_head[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-size:15px;font-style:normal;font-weight:500}.pop_body[_ngcontent-%COMP%]{color:#319860;font-family:Inter,sans-serif;font-size:12px;font-style:normal;font-weight:300}.card_head[_ngcontent-%COMP%]{color:#3553a1;font-family:Inter,sans-serif;font-size:18px;font-weight:700}.table_head[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-size:16px;font-weight:700}.table_content[_ngcontent-%COMP%], .high[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-size:16px;font-weight:400}.menu_header[_ngcontent-%COMP%]{box-shadow:none}.main_span[_ngcontent-%COMP%]{color:#565656;font-family:Inter,sans-serif;font-size:10px;font-weight:300}.menu_content[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-size:12px;font-style:normal;font-weight:300}.menu_hr[_ngcontent-%COMP%]{border:.5px solid #7b7b7b;background-color:#7b7b7b}.course_span[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-size:12px;font-style:normal;font-weight:300}.menu_footer[_ngcontent-%COMP%]{box-shadow:none;padding:8px}.ref_btn[_ngcontent-%COMP%]{color:#fff;font-family:Inter,sans-serif;font-size:16px;font-style:normal;font-weight:700}.left_label[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-size:25px;font-weight:500}.ryt_label[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-size:18px;font-weight:500}.start_btn[_ngcontent-%COMP%]{--border-radius: 4px;--background: #319860}.start_span[_ngcontent-%COMP%]{color:#fff;font-family:Inter,sans-serif;font-size:18px;font-weight:400;text-transform:capitalize}@media only screen and (max-width: 600px){.content_p[_ngcontent-%COMP%]{font-size:20px}}@media only screen and (min-width: 601px) and (max-width: 992px){.content_p[_ngcontent-%COMP%]{font-size:22px}}@media only screen and (min-width: 993px){.content_p[_ngcontent-%COMP%]{font-size:25px}}']})}return i})()}];let O=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[d.Bz.forChild(D),d.Bz]})}return i})(),C=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[p.ez,_.u5,s.Pc,O]})}return i})()}}]);