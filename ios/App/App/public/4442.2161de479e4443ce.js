"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4442],{5897:(_,m,s)=>{s.d(m,{A:()=>u});const u=(0,s(2726).fo)("Browser",{web:()=>s.e(3671).then(s.bind(s,3671)).then(a=>new a.BrowserWeb)})},5346:(_,m,s)=>{s.d(m,{ez:()=>u,tP:()=>d});var d=function(c){return c.Documents="DOCUMENTS",c.Data="DATA",c.Library="LIBRARY",c.Cache="CACHE",c.External="EXTERNAL",c.ExternalStorage="EXTERNAL_STORAGE",c}(d||{}),u=function(c){return c.UTF8="utf8",c.ASCII="ascii",c.UTF16="utf16",c}(u||{})},1461:(_,m,s)=>{s.d(m,{fy:()=>a,tP:()=>u.tP});var d=s(2726),u=s(5346);const a=(0,d.fo)("Filesystem",{web:()=>s.e(4522).then(s.bind(s,4522)).then(p=>new p.FilesystemWeb)})},4442:(_,m,s)=>{s.r(m),s.d(m,{CourseIndexPageModule:()=>D});var d=s(6814),u=s(95),a=s(3134),p=s(4875),c=s(5861),h=s(5897),C=s(3613),v=s(1461),e=s(9212),T=s(5175),P=s(2359),I=s(6593);function F(i,g){if(1&i&&e._UZ(0,"ion-text",11),2&i){const t=e.oxw().$implicit;e.Q6J("innerHTML",t.name,e.oJD)}}function b(i,g){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,F,1,1,"ion-text",10),e.qZA()),2&i){const t=g.index;e.xp6(),e.Q6J("ngIf",0==t)}}function A(i,g){if(1&i&&e._UZ(0,"p",23),2&i){const t=e.oxw().$implicit;e.Q6J("innerHTML",t.name,e.oJD)}}function E(i,g){1&i&&e._UZ(0,"ion-img",24)}function S(i,g){if(1&i){const t=e.EpF();e.TgZ(0,"ion-item",25),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,o=e.oxw(3);return e.KtG(o.onClick(r))}),e._UZ(1,"p",26)(2,"ion-icon",27),e.qZA()}if(2&i){const t=e.oxw().$implicit;e.xp6(),e.Q6J("innerHTML",t.name,e.oJD)}}function M(i,g){if(1&i&&(e.TgZ(0,"div",19),e.YNc(1,A,1,1,"p",20)(2,E,1,0,"ion-img",21)(3,S,3,1,"ion-item",22),e.qZA()),2&i){const t=g.$implicit;e.xp6(),e.Q6J("ngIf","label"==t.modname),e.xp6(),e.Q6J("ngIf","label"!=t.modname),e.xp6(),e.Q6J("ngIf","label"!=t.modname)}}function J(i,g){if(1&i){const t=e.EpF();e.TgZ(0,"ion-accordion-group")(1,"ion-accordion",14)(2,"ion-item",15),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().index,o=e.oxw();return e.KtG(o.toggleAccordion(r))}),e._UZ(3,"ion-icon",16)(4,"ion-label",17),e.qZA(),e.YNc(5,M,4,3,"div",18),e.qZA()()}if(2&i){const t=e.oxw(),n=t.index,r=t.$implicit,o=e.oxw();e.xp6(3),e.Udp("transform",o.isExpanded[n]?"rotate(180deg)":"rotate(0deg)"),e.Q6J("name",o.isExpanded[n]?"chevron-up":"chevron-forward"),e.xp6(),e.Q6J("innerHTML",r.name,e.oJD),e.xp6(),e.Q6J("ngForOf",r.modules)}}function O(i,g){if(1&i&&(e.TgZ(0,"div",12),e.YNc(1,J,6,5,"ion-accordion-group",13),e.qZA()),2&i){const t=g.index;e.xp6(),e.Q6J("ngIf",t>=1)}}const Z=[{path:"",component:(()=>{class i{constructor(t,n,r,o,l,f,x,y){this.router=t,this.route=n,this.authService=r,this.loadingCtrl=o,this.tokenService=l,this.modalController=f,this.toastCtrl=x,this.domSenitizer=y,this.isExpanded=[],this.pdfUrl=""}gettoken(t){console.log(t),this.authService.token=this.tokenService.getToken(),console.log(this.token)}ngOnInit(){this.route.queryParams.subscribe(t=>{t&&t.data&&(this.data=JSON.parse(t.data),this.data.id&&this.authService.getCourseContent(this.data.id)?.subscribe({next:n=>{this.courseData=n,console.log("courseData",this.courseData)},error:n=>{console.error(n)}}))}),this.getScorms()}getScorms(){this.authService.getScormsByCourseId(this.data.id).subscribe({next:t=>{console.log(t),this.scormData=t.scorms},error:t=>{console.error("Login failed:",t)}})}onClose(){console.log("this.data ---- ",this.data);let t={queryParams:{data:JSON.stringify(this.data)}};this.router.navigate(["cyber-security"],t)}onClick(t){var n=this;return(0,c.Z)(function*(){const r=n.tokenService.getUser()[0].id;if(console.log(">>>>>tojken",r),console.log(r),n.authService.createRecentItems(t.id,r,n.data.id).subscribe(function(){var o=(0,c.Z)(function*(l){console.log(l)});return function(l){return o.apply(this,arguments)}}()),console.log(t.modname,"value.modname"),"quiz"===t.modname){localStorage.setItem("quizName",t.name);let o={queryParams:{courseId:n.data.id,data:JSON.stringify(t.instance)}};n.router.navigate(["index-quiz"],o)}if("book"===t.modname){console.log("book"),t.contents=t.contents.filter(l=>l.filename.includes(".html"));let o={queryParams:{data:JSON.stringify(t)}};n.router.navigate(["index-activity"],o)}if("feedback"===t.modname){console.log("feedback",t),console.log("feedback",t);try{const o=yield n.authService.checkFeedbackFormStatus(t.instance).toPromise();console.log("res",o),"Proceed"===o.result.msg&&n.router.navigateByUrl(`/feedback/${n.data.id}/${t.instance}`),"error"==o.result&&n.presentToast(o[0].msg,"danger")}catch(o){console.log(o)}}if("page"===t.modname){let o={queryParams:{data:JSON.stringify(t)}};n.router.navigate(["index-activity"],o)}if("resource"===t.modname)for(let o=0;o<t.contents.length;o++){const l=t.contents[o];if(l.mimetype.includes("mp4")){let f={queryParams:{data:JSON.stringify(t)}};n.router.navigate(["index-activity"],f)}if(l.filename.includes(".pdf")){const f=n.extractFileUrl(l.fileurl)+`?token=${n.tokenService.getToken()}`;console.log("pdf url",f),n.pdfUrl=f,n.openPdfViewerModal()}}if("scorm"===t.modname){console.log("value",t);const o=`https://gurukul.skfin.in/mod/scorm/scorm.php?id=${t.instance}&userid=${r}&token=${n.tokenService.getToken()}`;yield h.A.open({url:o}),console.log("value.instance",t.instance),console.log("userid",r),console.log("token",n.token)}"simplecertificate"===t.modname&&h.A.open({url:t.url}),"hvp"==t.modname&&(console.log("this.scormData",n.scormData),console.log(t.instance,"test"),h.A.open({url:t.url}))})()}toggleAccordion(t){this.isExpanded[t]=!this.isExpanded[t]}downloadFile(t,n){var r=this;return(0,c.Z)(function*(){try{const o=yield r.loadingCtrl.create({message:"File downloading..."});o.present();const f=yield(yield fetch(t)).blob(),x=yield r.blobToBase64(f),w=`gurukul/${(new Date).toLocaleString().replace(/[,:\s\/]/g,"-")}/${n}`;o.dismiss(),yield v.fy.writeFile({path:w,data:x,directory:v.tP.External,recursive:!0}),r.presentToast("File Downloaded Successfully! Please Check in Documents Folder","success")}catch(o){throw console.error("Error saving image:",o),o}})()}extractFileUrl(t){const n=t.indexOf("?");return-1!==n?t.substring(0,n):t}openPdfViewerModal(){var t=this;return(0,c.Z)(function*(){return yield(yield t.modalController.create({component:C.Q,componentProps:{pdfUrl:t.pdfUrl}})).present()})()}blobToBase64(t){return new Promise((n,r)=>{const o=new FileReader;o.readAsDataURL(t),o.onloadend=()=>{const l=o.result.split(",")[1];n(l)},o.onerror=l=>{r(l)}})}presentToast(t,n){var r=this;return(0,c.Z)(function*(){(yield r.toastCtrl.create({message:t,duration:5e3,position:"top",color:n})).present()})()}static#e=this.\u0275fac=function(n){return new(n||i)(e.Y36(p.F0),e.Y36(p.gz),e.Y36(T.e),e.Y36(a.HT),e.Y36(P.B),e.Y36(a.IN),e.Y36(a.yF),e.Y36(I.H7))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-course-index"]],decls:13,vars:4,consts:[[3,"translucent"],[1,""],["slot","end","size","large","name","close-sharp",1,"p-1",3,"click"],[3,"fullscreen"],[1,"main"],[1,"main_sub"],[1,"main_title"],[1,"content_head","mb-3"],[4,"ngFor","ngForOf"],["class","col-12",4,"ngFor","ngForOf"],["class","content_title",3,"innerHTML",4,"ngIf"],[1,"content_title",3,"innerHTML"],[1,"col-12"],[4,"ngIf"],["value","first","toggleIcon","",1,"acc_main_index"],["lines","none","slot","header",1,"acc_header_index",3,"click"],["slot","start","color","primary",1,"p-0","m-0",3,"name"],[1,"acc_label",3,"innerHTML"],["class","col-12 d-flex justify-content-evenly pt-0","slot","content",4,"ngFor","ngForOf"],["slot","content",1,"col-12","d-flex","justify-content-evenly","pt-0"],["slot","start",3,"innerHTML",4,"ngIf"],["src","assets/img/dot.png","alt","",4,"ngIf"],["lines","none","class","col-10 d-flex align-items-center justify-content-between",3,"click",4,"ngIf"],["slot","start",3,"innerHTML"],["src","assets/img/dot.png","alt",""],["lines","none",1,"col-10","d-flex","align-items-center","justify-content-between",3,"click"],[1,"content_p",3,"innerHTML"],["slot","end","color","primary","name","chevron-forward-sharp",1,"acc_icon"]],template:function(n,r){1&n&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title"),e._uU(3,"Course Index"),e.qZA(),e.TgZ(4,"ion-icon",2),e.NdJ("click",function(){return r.onClose()}),e.qZA()()(),e.TgZ(5,"ion-content",3)(6,"div",4)(7,"div",5)(8,"h1",6),e._uU(9,"All Sections"),e.qZA()(),e.TgZ(10,"div",7),e.YNc(11,b,2,1,"div",8),e.qZA(),e.YNc(12,O,2,1,"div",9),e.qZA()()),2&n&&(e.Q6J("translucent",!0),e.xp6(5),e.Q6J("fullscreen",!0),e.xp6(6),e.Q6J("ngForOf",r.courseData),e.xp6(),e.Q6J("ngForOf",r.courseData))},dependencies:[d.sg,d.O5,a.We,a.eh,a.W2,a.Gu,a.gu,a.Xz,a.Ie,a.Q$,a.yW,a.wd,a.sr],styles:[".main_sub[_ngcontent-%COMP%]{padding:20px}.main_title[_ngcontent-%COMP%]{padding:0;margin:0;font-family:Inter,sans-serif;font-size:16px;font-weight:500}.content_head[_ngcontent-%COMP%]{background:#3553a1;padding:15px}.content_title[_ngcontent-%COMP%]{padding:8px;color:#fff;font-family:Inter,sans-serif;font-size:15px;font-style:normal;font-weight:500}.acc_label[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-size:12px;font-weight:600}.acc_icon[_ngcontent-%COMP%]{font-size:22px}.content_p[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Inter,sans-serif;font-size:12px;font-weight:500}"]})}return i})()}];let k=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#n=this.\u0275inj=e.cJS({imports:[p.Bz.forChild(Z),p.Bz]})}return i})(),D=(()=>{class i{static#e=this.\u0275fac=function(n){return new(n||i)};static#t=this.\u0275mod=e.oAB({type:i});static#n=this.\u0275inj=e.cJS({imports:[d.ez,u.u5,a.Pc,k]})}return i})()}}]);