"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3573],{3573:(Z,f,r)=>{r.r(f),r.d(f,{QuizContentPageModule:()=>P});var g=r(6814),y=r(95),a=r(3134),m=r(4875),l=r(5861),t=r(9212),z=r(1687),C=r(5175),x=r(6593),b=r(2359);const S=["contentContainer"],v=["myInput"];function I(s,q){if(1&s&&(t.TgZ(0,"ion-card",18)(1,"ion-label"),t._UZ(2,"div",19),t.qZA()()),2&s){const e=q.$implicit;t.xp6(2),t.Q6J("innerHTML",e.sanitizedHtml,t.oJD)}}const p=s=>({color:s}),T=[{path:"",component:(()=>{class s{constructor(e,n,i,o,c,u,h,_,O){this.menuCtrl=e,this.router=n,this.route=i,this.authService=o,this.sanitizer=c,this.renderer=u,this.toastCtrl=h,this.tokenService=_,this.loadingController=O,this.contentContainer=t.SBq,this.myInput=a.pK,this.durationInSeconds=600,this.timer=this.durationInSeconds,this.selectedValues={},this.showNext=!1,this.extractedValues=[],this.nextDisabled=!1,this.timerStarted=!1,this.className="",this.quizContent=[{id:1,heading:"Question 1",en:"If you know the sender you, you can click the email link",hn:"( \u092f\u0926\u093f \u0906\u092a \u0908\u092e\u0947\u0932 \u092d\u0947\u091c\u0928\u0947 \u0935\u093e\u0932\u0947 \u0915\u094b \u091c\u093e\u0928\u0924\u0947 \u0939\u0948 \u0924\u094b \u0906\u092a \u0908\u092e\u0947\u0932 \u092d\u0947\u091c\u0928\u0947 \u0935\u093e\u0932\u0947 \u0915\u0947 \u0932\u093f\u0902\u0915 \u092a\u0930 \u0915\u094d\u0932\u093f\u0915 \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948 ? )",a:"True",b:"False",selectedValue:null},{id:2,heading:"Question 2",en:"If you know the sender you, you can click the email link",hn:"( \u092f\u0926\u093f \u0906\u092a \u0908\u092e\u0947\u0932 \u092d\u0947\u091c\u0928\u0947 \u0935\u093e\u0932\u0947 \u0915\u094b \u091c\u093e\u0928\u0924\u0947 \u0939\u0948 \u0924\u094b \u0906\u092a \u0908\u092e\u0947\u0932 \u092d\u0947\u091c\u0928\u0947 \u0935\u093e\u0932\u0947 \u0915\u0947 \u0932\u093f\u0902\u0915 \u092a\u0930 \u0915\u094d\u0932\u093f\u0915 \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948 ? )",a:"True",b:"False",selectedValue:null}],this.route.queryParams.subscribe(d=>{console.log(d),this.quizName=localStorage.getItem("quizName"),console.log("attemptId",this.attemptId),d&&d.data&&(this.attemptId?this.attemptId!==JSON.parse(d.data)&&(this.attemptId=Number(JSON.parse(d.data)),this.getAttemptSummary()):(this.attemptId=Number(JSON.parse(d.data)),this.getAttemptSummary()))})}ngOnInit(){this.sanitizedHtml=this.sanitizer.bypassSecurityTrustHtml(this.quizData),this.getData(),this.getMaxAttemptData(),this.triggerTimer()}scrollToBottom(){this.renderer.setProperty(this.contentContainer.nativeElement,"scrollTop",0)}ionViewWillEnter(){this.myInput.nativeElement.style.display="",this.myInput.nativeElement.scrollIntoView(),this.myInput.nativeElement.style.display="none"}scrollToTop(){this.content?this.content.scrollToTop().then(()=>{console.log("Scrolled to top successfully")}).catch(e=>{console.error("Error scrolling to top:",e)}):console.error("Content reference not found")}getData(){var e=this;return(0,l.Z)(function*(){const n=yield e.loadingController.create({message:"Loading...",duration:5e3});return e.authService.getQuizData(e.data,e.courseId).then(function(){var i=(0,l.Z)(function*(o){if(yield n.present(),console.log("get data",e.data,e.courseId),e.quizAttamptData=yield o[0],console.log(e.quizAttamptData,"this.quizAttamptData"),e.quizAttamptData){const c=yield Number(e.quizAttamptData.gradepass),u=yield Number(e.quizAttamptData.grademax);e.quizAttamptData.gradepass=yield c.toFixed(2),e.quizAttamptData.grademax=yield u.toFixed(2)}console.log(e.quizAttamptData,"this.quizAttamptData"),yield n.dismiss()});return function(o){return i.apply(this,arguments)}}(),i=>{console.error("Login failed:",i)})})()}getMaxAttemptData(){var e=this;return(0,l.Z)(function*(){const n=yield e.loadingController.create({message:"Loading...",duration:5e3});e.authService.getMaxAttemptData(e.quizId,e.tokenService.getUser()[0].id).subscribe(function(){var i=(0,l.Z)(function*(o){yield n.present(),console.log("res",o)});return function(o){return i.apply(this,arguments)}}()),yield n.dismiss()})()}getAttemptSummary(){var e=this;return(0,l.Z)(function*(){const n=yield e.loadingController.create({message:"Loading...",duration:1e3});try{yield n.present(),e.authService.getAttemptSummary(e.attemptId).subscribe({next:i=>{e.lastactiontime=i.questions[0].lastactiontime,console.log("getAttemptSummary",i),e.datanew=i.questions[3].html,console.log("datanew",e.datanew),e.quizData=i.questions.map(o=>({...o,sanitizedHtml:e.sanitizer.bypassSecurityTrustHtml(o.html.replace(/href=\"#\"/g,'style="color: #212529;text-decoration: none"'))})),console.log("this.quizData - ",e.quizData),e.executeScripts()},error:i=>{console.error("Error fetching attempt summary:",i)},complete:()=>{n.dismiss()}})}catch(i){console.error("Error showing loading spinner:",i),yield n.dismiss()}})()}executeScripts(){this.quizData.forEach(e=>{const n=this.renderer.createElement("script");this.renderer.appendChild(document.body,n)})}extractValues(){const e=document.querySelectorAll(".que");console.log(e),e.forEach((n,i)=>{console.log(n),console.log(i);const o=i+1,c=n.querySelector('input[type="radio"]:checked'),u=n.querySelector('input[type="checkbox"]:checked'),h={slot:o.toString(),questionId:n.id,answer:c?c.value:"Not answered",flag:u?u.value:"Not answered"};this.extractedValues.push(h)}),console.log(this.extractedValues)}startTimer(){var e=this;return(0,l.Z)(function*(){const n=yield e.loadingController.create({message:"Loading...",duration:1e3}),i=(0,z.F)(1e3);e.timerSubscription=i.subscribe((0,l.Z)(function*(){yield n.present(),e.timer>0&&e.timer--,e.timer<=0&&!e.timerStarted&&(e.timerStarted=!0,e.nextDisabled=!0,e.presentToast("Time Limit exceeded, Please try again","danger")),yield n.dismiss()}))})()}triggerTimer(){this.startTimer()}formatTime(e){const n=Math.floor(e/3600),i=Math.floor(e%3600/60),o=e%60;return`${this.pad(n)}:${this.pad(i)}:${this.pad(o)}`}pad(e){return e<10?"0"+e:e.toString()}handleChange(e,n){console.log("Current value:",e.target.value,n),this.selectedValues[n.heading]=e.target.value,console.log(this.selectedValues)}clearSelection(e){e.selectedValue=null,delete this.selectedValues[e.heading],console.log(this.selectedValues)}onBookmark(){this.menuCtrl.open("quizMenu")}onNext(){this.extractedValues=[],this.extractValues();let e={queryParams:{id:this.attemptId,data:JSON.stringify(this.extractedValues)}};localStorage.setItem("className",JSON.stringify(this.className)),this.router.navigate(["attempt-summary"],e)}onClose(){this.menuCtrl.close("quizMenu")}onSubmit(){this.router.navigate(["index-quiz"])}ngOnDestroy(){this.timerSubscription&&this.timerSubscription.unsubscribe()}presentToast(e,n){var i=this;return(0,l.Z)(function*(){(yield i.toastCtrl.create({message:e,duration:1500,position:"top",color:n})).present()})()}static#t=this.\u0275fac=function(n){return new(n||s)(t.Y36(a._q),t.Y36(m.F0),t.Y36(m.gz),t.Y36(C.e),t.Y36(x.H7),t.Y36(t.Qsj),t.Y36(a.yF),t.Y36(b.B),t.Y36(a.HT))};static#e=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-quiz-content"]],viewQuery:function(n,i){if(1&n&&(t.Gf(S,5),t.Gf(a.W2,7),t.Gf(v,7)),2&n){let o;t.iGM(o=t.CRH())&&(i.contentContainer=o.first),t.iGM(o=t.CRH())&&(i.content=o.first),t.iGM(o=t.CRH())&&(i.myInput=o.first)}},inputs:{durationInSeconds:"durationInSeconds"},decls:28,vars:12,consts:[["side","end","contentId","main-content","menuId","quizMenu"],[1,"menu_header"],[1,"menu_title"],["slot","end","size","large","name","close-sharp",1,"p-1",3,"click"],[3,"translucent"],["color","primary","slot","start","defaultHref",""],[1,"title",3,"innerHTML"],["id","main-content",1,"reset-scroll",3,"fullscreen"],["contentContainer",""],["type","text","placeholder","Type something here..."],["myInput",""],[1,"main","ion-padding"],[1,"col-12","mb-3","time_slot","d-flex","align-items-end","justify-content-between"],[1,"time_h",3,"ngStyle"],[1,"time_p"],["class","card p-3 mb-3",4,"ngFor","ngForOf"],["color","success","expand","block",1,"btn_nxt",3,"disabled","click"],[1,"span_nxt"],[1,"card","p-3","mb-3"],[3,"innerHTML"]],template:function(n,i){1&n&&(t.TgZ(0,"ion-menu",0)(1,"ion-header",1)(2,"ion-toolbar")(3,"ion-title",2),t._uU(4,"Quiz Navigation"),t.qZA(),t.TgZ(5,"ion-icon",3),t.NdJ("click",function(){return i.onClose()}),t.qZA()()()(),t.TgZ(6,"ion-header",4)(7,"ion-toolbar"),t._UZ(8,"ion-back-button",5)(9,"ion-title",6),t.qZA()(),t.TgZ(10,"ion-content",7,8),t._UZ(12,"input",9,10),t.TgZ(14,"div",11)(15,"div",12)(16,"h1",13),t._uU(17," Time Left "),t.TgZ(18,"strong"),t._uU(19),t.qZA()(),t._UZ(20,"h1",13),t.TgZ(21,"p",14),t._uU(22,"Hide"),t.qZA()(),t.YNc(23,I,3,1,"ion-card",15),t.TgZ(24,"div")(25,"ion-button",16),t.NdJ("click",function(){return i.onNext()}),t.TgZ(26,"span",17),t._uU(27,"Next"),t.qZA()()()()()),2&n&&(t.xp6(6),t.Q6J("translucent",!0),t.xp6(3),t.Q6J("innerHTML",i.quizName,t.oJD),t.xp6(),t.Q6J("fullscreen",!0),t.xp6(6),t.Q6J("ngStyle",t.VKq(8,p,i.timer<=60?"#B80000":"")),t.xp6(3),t.hij("",i.formatTime(i.timer)," "),t.xp6(),t.Q6J("ngStyle",t.VKq(10,p,i.timer<=60?"#B80000":"")),t.xp6(3),t.Q6J("ngForOf",i.quizData),t.xp6(2),t.Q6J("disabled",i.nextDisabled))},dependencies:[g.sg,g.PC,a.YG,a.PM,a.W2,a.Gu,a.gu,a.Q$,a.z0,a.wd,a.sr,a.oU],styles:[".title[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-size:20px;font-weight:500}.time_h[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-size:20px;font-weight:300}.time_p[_ngcontent-%COMP%]{color:#3553a1;font-family:Inter,sans-serif;font-size:15px;font-weight:700}.card[_ngcontent-%COMP%]{border-radius:10px;border:1px solid #dcdcdc}.card_head[_ngcontent-%COMP%]{color:#3553a1;font-family:Inter,sans-serif;font-size:18px;font-weight:700}.card_en[_ngcontent-%COMP%]{margin:0;color:#464646;font-family:Inter,sans-serif;font-size:16px;font-weight:400}.card_hn[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-size:14px;font-weight:400}.clear[_ngcontent-%COMP%]{--border-radius: 4px;--border: 1px solid #3553a1;--background: #fff}.span_clear[_ngcontent-%COMP%]{color:#3553a1;font-family:Inter,sans-serif;font-size:16px;font-weight:600;text-transform:capitalize}.btn_nxt[_ngcontent-%COMP%]{border-radius:4px}.span_nxt[_ngcontent-%COMP%]{color:#fff;font-family:Inter,sans-serif;font-size:18px;font-weight:400;text-transform:capitalize}.list_left[_ngcontent-%COMP%], .list_ryt[_ngcontent-%COMP%]{color:#565656;font-family:Inter,sans-serif;font-size:16px;font-weight:700}.label_left[_ngcontent-%COMP%]{color:#565656;font-family:Inter,sans-serif;font-size:16px;font-weight:400}.deadline[_ngcontent-%COMP%]{color:#464646;font-family:Inter,sans-serif;font-size:16px;font-weight:400}.menu_title[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-size:20px;font-weight:500}.menu_label[_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-size:18px;font-weight:500}.r0[_ngcontent-%COMP%]{display:flex!important;align-items:center}.reset-scroll[_ngcontent-%COMP%]{scroll-behavior:auto}.reset-scroll[_ngcontent-%COMP%]:target{scroll-behavior:auto;scroll-margin-top:0}"]})}return s})()}];let M=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275mod=t.oAB({type:s});static#n=this.\u0275inj=t.cJS({imports:[m.Bz.forChild(T),m.Bz]})}return s})(),P=(()=>{class s{static#t=this.\u0275fac=function(n){return new(n||s)};static#e=this.\u0275mod=t.oAB({type:s});static#n=this.\u0275inj=t.cJS({imports:[g.ez,y.u5,a.Pc,M]})}return s})()}}]);